<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>
      
        How to make a colour palette app -- 
      
      Yes, But How?
    </title>
    
      <link rel="canonical" href=https://3dvkr.github.io/posts/colour-pallette/>
    
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script async data-respect-dnt src="https://cdn.splitbee.io/sb.js"></script>
  </head>
  <body>
    <header>
    <nav aria-label="Primary">
        <a href="/" class="site_title"><h1>Yes, But How?</h1></a>
        <ul class="nav-list">
            
            <li>
              <a href="/about/">About</a>
            </li>
            
            <li>
              <a href="/tags/">Tags</a>
            </li>
            
        </ul>
    </nav>
</header>
    <main tabindex="-1" id="main-content">
      

<h2>How to make a colour palette app</h2>
<p class="date">Wed Apr 21 2021</p>
<p>Tags: 
    
        <a href="/tags/#javascript">javascript</a>
    
</p>
<p>This is a beginner-friendly tutorial using HTML, CSS, and vanillaJS.</p>
<h2>What exactly are we building?</h2>
<p>We're building a small app that lets the user pick three colours, or can suggest two colours that work well with a colour that the user has chosen. We'll use <a href="/posts/hsl">HSL values</a> to choose our colours and build our pallette. Most of the focus is on vanillaJS.</p>
<p>Here's the app:</p>
<p class="codepen" data-height="488" data-theme-id="dark" data-default-tab="html,result" data-user="dvkr" data-slug-hash="JjWooEd" data-preview="true" style="height: 488px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Colour Pallette">
  <span>See the Pen <a href="https://codepen.io/dvkr/pen/JjWooEd">
  Colour Pallette</a> by dvkr (<a href="https://codepen.io/dvkr">@dvkr</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
<h2>How/where do I build it?</h2>
<p>Codepen is easiest. Another option is to create a folder with one HTML file, one CSS file, and one JavaScript file, and code along with a code editor. Link the CSS and JavaScript to the HTML file.</p>
<h2>Starter Code</h2>
<p>Here is the HTML code. In the first section, there are three <code>div</code> containers which will display the colour selected. We'll need a way to target all three together, and each of them individually, so they'll need a class and id. In the second section, there are three input fields, and two buttons. You can read more about the attributes for the input element <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input">here</a>.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span>            <br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colourChoice<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>choice1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>First colour<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colourChoice<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>choice2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Second colour<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>colourChoice<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>choice3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Third colour<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Enter HSL values:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>values<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hue<br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hue<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>360<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sat<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Saturation<br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sat<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Lightness<br>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light<span class="token punctuation">"</span></span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>                                    <br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>changeBtn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> Change colour<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suggestBtn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Suggest colour<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>
<h2>Building the app with JavaScript</h2>
<p>Most objects and methods in this project's JavaScript code are from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">DOM API</a>. Instead of for-loops, we'll use arrays and the <code>forEach</code> method. To parse values, we'll use the <code>slice</code> and <code>splice</code> methods on strings and arrays. To generate random values, we'll use the <code>Math</code> module.</p>
<p>First, we'll need to assign the three inputs to variables, so we can access their values in response to user interaction.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> hue <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'hue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> sat <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'sat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> light <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'light'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Next, we'll target the first button with its id, and use the <code>addEventListener</code> method to add interactiveness. This method's first argument is the event that it listens for (a click), and the second argument is a callback function that runs once it detects that event (<code>getHSL</code>). Since the <code>addEventListener</code> method is calling the function, do not add <code>()</code> after the function's name.</p>
<p>The function definition for <code>getHSL</code> is below. Its job is to retrive the values from the input fields and apply that colour as the background to the selected <code>colourChoice</code> div. For now, we'll have it always change the first div's background colour (<code>#choice1</code>).</p>
<pre class="language-javascript"><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'changeBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> getHSL<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">getHSL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> hueVal <span class="token operator">=</span> <span class="token operator">+</span>hue<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>    <span class="token keyword">let</span> satVal <span class="token operator">=</span> <span class="token operator">+</span>sat<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>    <span class="token keyword">let</span> lightVal <span class="token operator">=</span> <span class="token operator">+</span>light<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br><br>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'choice1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>In a newline above our event listener, we'll target all three <code>.colourChoice</code> divs. Declare a new variable <code>selection</code>, and assign the first div as the default element. Then, we'll add an event listener to all three divs, with an anonymous callback function as the second argument:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> colourChoice <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.colourChoice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> selection <span class="token operator">=</span> colourChoice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>colourChoice<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">div</span> <span class="token operator">=></span> div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    selection <span class="token operator">=</span> div<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>We can now replace <code>document.getElementById('choice1')</code> with <code>selection</code> in the <code>getHSL</code> function.</p>
<p>At this point, our first button works, but we'll want a way to provide feedback in case the user doesn't provide valid inputs. Let's start by changing the first three lines of the <code>getHSL</code> function:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getHSL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> hueVal <span class="token operator">=</span> hue<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>hue<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> satVal <span class="token operator">=</span> sat<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>sat<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> lightVal <span class="token operator">=</span> light<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>light<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>  <span class="token comment">// more code...</span><br><span class="token punctuation">}</span></code></pre>
<p>We're using the ternary operator to choose the value to assign. If a value is provided, it will assign that value, casted from a String-type to a Number-type with the <code>+</code> in front. If it is missing, it will assign <code>-1</code>.</p>
<p>Then we'll need to check if the value is between 0 and 360 for the hue, and 0 and 100 for saturation and lightness. To provide feedback, we'll have a red border around that input field. In order to clear errors from previous attempts, the first thing the function should do every time it runs is reset the border style. After updating the background colour, we'll also update the text content of the selected div to the hsl value. Here is the updated <code>getHSL</code> function definition:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getHSL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token punctuation">[</span>hue<span class="token punctuation">,</span> sat<span class="token punctuation">,</span> light<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">"1px dotted black"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reset style</span><br>    <span class="token keyword">let</span> hueVal <span class="token operator">=</span> hue<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>hue<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> satVal <span class="token operator">=</span> sat<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>sat<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>    <span class="token keyword">let</span> lightVal <span class="token operator">=</span> light<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>light<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>    <br>    <span class="token comment">// check for errors, and provide feedback</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>hueVal <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> hueVal <span class="token operator">&lt;=</span> <span class="token number">360</span> <br>            <span class="token operator">&amp;&amp;</span> satVal <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> satVal <span class="token operator">&lt;=</span> <span class="token number">100</span> <br>            <span class="token operator">&amp;&amp;</span> lightVal <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lightVal <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        selection<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>        selection<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token keyword">function</span> <span class="token function">makeRed</span><span class="token punctuation">(</span><span class="token parameter">whichBox</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>whichBox<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">"3px solid red"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>hueVal <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> hueVal <span class="token operator">&lt;=</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">makeRed</span><span class="token punctuation">(</span>hue<span class="token punctuation">)</span><span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>satVal <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> satVal <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">makeRed</span><span class="token punctuation">(</span>sat<span class="token punctuation">)</span><span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>lightVal <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> lightVal <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">makeRed</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Those <code>if</code>-statements could be easier to read. Lets define a little function that checks if a number falls within the range we want:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">inBetween</span><span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> input <span class="token operator">>=</span> min <span class="token operator">&amp;&amp;</span> input <span class="token operator">&lt;=</span> max<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>
<p>Going into the <code>getHSL()</code> function definition, we can add this function right before the <code>if-else</code> statement, and use it to re-write the <code>if</code>-conditions in a more readable way:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getHSL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token punctuation">[</span>hue<span class="token punctuation">,</span> sat<span class="token punctuation">,</span> light<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">"1px dotted black"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> hueVal <span class="token operator">=</span> hue<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>hue<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> satVal <span class="token operator">=</span> sat<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>sat<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>  <span class="token keyword">let</span> lightVal <span class="token operator">=</span> light<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token operator">+</span>light<span class="token punctuation">.</span>value <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">function</span> <span class="token function">inBetween</span><span class="token punctuation">(</span><span class="token parameter">input<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> input <span class="token operator">>=</span> min <span class="token operator">&amp;&amp;</span> input <span class="token operator">&lt;=</span> max<span class="token punctuation">;</span><span class="token punctuation">}</span><br><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">inBetween</span><span class="token punctuation">(</span>hueVal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    <span class="token function">inBetween</span><span class="token punctuation">(</span>satVal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br>    <span class="token function">inBetween</span><span class="token punctuation">(</span>lightVal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    selection<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    selection<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    <span class="token keyword">function</span> <span class="token function">makeRed</span><span class="token punctuation">(</span><span class="token parameter">whichValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      whichValue<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">"3px solid red"</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">inBetween</span><span class="token punctuation">(</span>hueVal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">makeRed</span><span class="token punctuation">(</span>hue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">inBetween</span><span class="token punctuation">(</span>satVal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">makeRed</span><span class="token punctuation">(</span>sat<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">inBetween</span><span class="token punctuation">(</span>lightVal<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">makeRed</span><span class="token punctuation">(</span>light<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>In a new line below the <code>#changeBtn</code>'s event listener, we'll add another event listener on <code>#suggestBtn</code> with a new callback function <code>suggestHSL</code>. Together, the two lines are:</p>
<pre class="language-javascript"><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#changeBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> getHSL<span class="token punctuation">)</span><span class="token punctuation">;</span><br>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#suggestBtn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> suggestHSL<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The <code>suggestHSL</code> function runs when the user clicks the second button. Here is the function definition with pseudocode:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">suggestHSL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// exit the function if the first `.choiceColour` div has no background colour</span><br>    <span class="token comment">// extract the first div's HSL values from the div's text content</span><br>    <span class="token comment">// for the remaining two `.choiceColour` divs</span><br>      <span class="token comment">// pick a new hue, saturation, and lightness</span><br><span class="token punctuation">}</span></code></pre>
<p>To keep the code modular, we'll need two new functions: <code>extractHSL</code> for the second point, and <code>newValue</code> to find the values for the third point. Our <code>suggestHSL</code> function definition now looks like this:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">suggestHSL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>colourChoice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">}</span><br>    <span class="token keyword">let</span> <span class="token punctuation">[</span>hueValFirst<span class="token punctuation">,</span> satValFirst<span class="token punctuation">,</span> lightValFirst<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">extractHSL</span><span class="token punctuation">(</span>colourChoice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>colourChoice<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br><br>       <span class="token keyword">let</span> hueNew <span class="token operator">=</span> <span class="token punctuation">(</span>hueValFirst <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">120</span> <span class="token operator">*</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">360</span><span class="token punctuation">;</span><br>       <span class="token keyword">let</span> satNew <span class="token operator">=</span> <span class="token function">newValue</span><span class="token punctuation">(</span>satValFirst<span class="token punctuation">)</span><span class="token punctuation">;</span><br>       <span class="token keyword">let</span> lightNew <span class="token operator">=</span> <span class="token function">newValue</span><span class="token punctuation">(</span>lightValFirst<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>       el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueNew<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satNew<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightNew<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>       el<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hsl(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hueNew<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>satNew<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lightNew<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>The <code>extractHSL</code> function to parse the values for hue, saturation, and lightness from the text:</p>
<pre class="language-javascript"><code class="language-javascript"><br><span class="token keyword">function</span> <span class="token function">extractHSL</span><span class="token punctuation">(</span><span class="token parameter">selectedBox</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> <span class="token punctuation">[</span>hueBox<span class="token punctuation">,</span> satBox<span class="token punctuation">,</span> lightBox<span class="token punctuation">]</span> <span class="token operator">=</span> selectedBox<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">+</span>hueBox<span class="token punctuation">,</span> <span class="token operator">+</span>satBox<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">+</span>lightBox<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>The <code>newValue</code> function finds a new value for the saturation and lightness based on those values for the first <code>.choiceColour</code> div. It does different calculations depending on which value we're calculating, with saturation being the default.</p>
<ul>
<li>If those values are low (below 33%), it returns a saturation value slightly higher than the input, or a lightness value between 20% and 85%.</li>
<li>If those values are high (above 66%), it returns a saturation value slightly below the input, or a lightness value between 15% and 80%.</li>
<li>Otherwise, it returns a saturation or lightness value between 25% and 75%.</li>
</ul>
<p>By placing some restrictions and keeping the values from being entirely random, the suggested palette is more likely to have colours that work well together.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">newValue</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> lightFlag <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> distance <span class="token operator">=</span>  Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>num <span class="token operator">%</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;</span> <span class="token number">33</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> lightFlag <span class="token operator">?</span> <span class="token number">33</span> <span class="token operator">+</span> distance <span class="token operator">:</span> <span class="token number">20</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">65</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">></span> <span class="token number">66</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> lightFlag <span class="token operator">?</span> <span class="token number">66</span> <span class="token operator">-</span> distance <span class="token operator">:</span> <span class="token number">80</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">65</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token number">25</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>There is one more place we can use the <code>extractHSL</code> function. If we click on a div that already has a background colour, we can have those values load in the input fields. This will allow for minor changes to the HSL, without the user having the manually copy the values into the fields. This line goes at the end of the callback function in the <code>.colourChoice</code> divs' event listeners:</p>
<pre class="language-javascript"><code class="language-javascript">colourChoice<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">div</span> <span class="token operator">=></span> div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    selection <span class="token operator">=</span> div<span class="token punctuation">;</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span> <span class="token punctuation">[</span>hue<span class="token punctuation">.</span>value<span class="token punctuation">,</span> sat<span class="token punctuation">.</span>value<span class="token punctuation">,</span> light<span class="token punctuation">.</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">extractHSL</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The complete code is available <a href="https://codepen.io/dvkr/pen/JjWooEd">here</a>. For a JavaScript exercise that does <em>not</em> involve DOM manipulation, I walk through building <a href="/posts/js-part3">Rock-Paper-Scissors-Lizard-Spock</a>.</p>


<p>Thanks for reading! I hope it was useful. I'd love to hear your thoughts over on <a href=https://twitter.com/_dvkr>Twitter</a>.</p>

    </main>

  </body>
</html>
